"use strict";(function(t){return{p:function(e){return t.each(t("html").attr("class").split(/\s+/),function(t,n){e||(n=n.split("-"),"page"==n[0]&&n[1]&&(e=n[1]))}),e||"unknown"}(),s:"pushState"in history,w:0,_o:[],_d:t.Deferred().resolve(),_t:0,_i:function(e,n,o,i){o=this,i=t.Deferred(),o._d.done(function(r){switch(r=new t.Deferred,r.done(function(){i.resolve()}),typeof e){case"function":n=e,e=!0;break;case"string":e="*"==e||e==o.p;break;case"object":e=-1!=t.inArray(o.p,e);break;default:e=!1}return e?void n.call(o,t,r.resolve):r.resolve()}),o._d=i},on:function(t,e,n){return n=this,n._o.push([t,e]),n._i(t,e),n},once:function(t,e,n){return n=this,n._i(t,e),n},o:function(){return!1},e:function(e,n,o,i,r,a){t("body").append('<div class="error"><div class="_"></div><dl><dt><span class="ico ico-sad"></span></dt><dd>'+e+'</dd><dd>请<a href="#" onclick="location.reload();return 0">刷新页面</a>以尝试解决这个问题。</dd></dl></div>'),n=t(".error"),o=n.children("dl"),i=40,r=n.width(),a=Math.min(480,r-i),o.css({width:a,left:Math.floor((r-a)/2)}),o.css("top",Math.floor((n.height()-o.height()-i)/2)),n.css({top:0,left:0})},_r:function(e){e=this,t.each(e._o,function(t,n){e._i(n[0],n[1])})},r:function(e,n,o,i,r,a,s,c,d,l){t("h2").text()!=e.t&&(document.title=e.n+" "+e.t+" | CCNR v2",n=this,o="aside a:",i="href",r="title",a="click",s=n._t.find("Chapter"),c="<h2>"+e.t+"</h2>"+t.map(e.p,function(t){return"<p>"+t+"</p>"}).join(""),d=t(o+"eq(1)"),l=e["-"],d.attr(i,l),"#"==l?d.removeAttr(r).click(n.o):d.attr(r,"《"+t(s.get(l-1)).text()+"》").off(a,n.o),d=t(o+"last"),l=e["+"],d.attr(i,l),"#"==l?d.removeAttr(r).click(n.o):d.attr(r,"《"+t(s.get(l-1)).text()+"》").off(a,n.o),t("article").html(c),n.w=0,n._r())}}})(jQuery).once(function(t,e,n,o,i,r,a,s,c){n=t(document.body),o=t("aside a:first"),i="scrolled",r="disabled",a="span",s="ico-top",c="ico-notop",o.click(function(){return o.hasClass(r)||t("html, body").animate({scrollTop:0},250),!1}),t(window).scroll(function(){0<window.scrollY?(n.addClass(i),o.removeClass(r).children(a).addClass(s).removeClass(c)):(n.removeClass(i),o.addClass(r).children(a).addClass(c).removeClass(s))}),e()}).once("chapter",function(t,e,n){n=this,t.get(t("article").data("toc")).done(function(o,i){n._t=i=t(o),document.title=i.find("Title").text()+" "+document.title,e()}).fail(function(){n.e("章节列表数据读取失败")})}).on("chapter",function(t,e,n,o,i,r,a,s,c,d,l){n=this,o="aside a:",i="href",a="title",r="disabled",s=location.pathname.split("/").pop()-0,c=n._t.find("Chapter"),d=t(o+"eq(1)"),1<s?d.attr(i,s-1).attr(a,"《"+t(c.get(s-2)).text()+"》").removeClass(r):d.addClass(r).click(n.o),d=t(o+"last"),d.removeClass("prefetched"),s<c.length?(d.attr(i,s+1).attr(a,"《"+t(c.get(s)).text()+"》").removeClass(r),l=d.children(".badge"),l.text(c.length-s),document.referrer||l.removeClass("hidden")):d.addClass(r).click(n.o),e()}).on(function(t,e){t("aside").removeClass("hidden"),e()}).once("chapter",function(t,e,n){n=this,t(document).keydown(function(e,o){o=t.inArray(e.which,[37,13,39]),-1!=o&&e.which!=n.w&&(n.w=e.which,t("aside a:eq("+(1+o)+")").click())}),e()}).once("chapter",function(t,e,n){return n=this,n.s?(t(window).on("popstate",function(t){history.state&&n.r(history.state)}),void t(document).ready(function(n,o,i){o="aside a:",i="href",n={t:t("h2").text(),p:[],"-":t(o+"eq(1)").attr(i),"+":t(o+"last").attr(i)},n.n=document.title.split(n.t)[0].replace(/\s*$/,""),t("p").each(function(e,o){n.p.push(t(o).text())}),history.replaceState(n,"",location.href.replace(/^.*\//,"")),e()})):e()}).on("chapter",function(t,e,n,o,i){return n=this,o=t("aside a:last"),i=o.attr("href"),n.s&&"#"!=i?(i-=0,t.get(i).done(function(e,r,a){r=t(e),a={n:history.state.n,t:r.find("Title").text(),p:[],"-":"#","+":"#"},r.find("Paragraph").each(function(e,n){a.p.push(t(n).text())}),1<i&&(a["-"]=i-1),i<n._t.find("Chapter").length&&(a["+"]=i+1),o.attr("class","prefetched"),n._f=a}),void e()):e()}).on("chapter",function(t,e,n,o){return n=t('aside a:last[href!="#"]'),o=this,o.s?(n.click(function(e){return!(e=o._f)||(history.pushState(e,"",n.attr("href")),window.scrollTo(0,0),o.r(e),delete o._f,t(".badge").addClass("hidden"),!1)}),void e()):e()});
//# sourceMappingURL=ccnr2.min.js.map