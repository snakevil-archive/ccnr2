"use strict";(function(t){return{p:function(e){return t.each(t("html").attr("class").split(/\s+/),function(t,n){e||(n=n.split("-"),"page"==n[0]&&n[1]&&(e=n[1]))}),e||"unknown"}(),s:"pushState"in history,w:0,_o:[],_d:t.Deferred().resolve(),_t:0,_i:function(e,n,i,o){i=this,o=t.Deferred(),i._d.done(function(r){switch(r=new t.Deferred,r.done(function(){o.resolve()}),typeof e){case"function":n=e,e=!0;break;case"string":e="*"==e||e==i.p;break;case"object":e=-1!=t.inArray(i.p,e);break;default:e=!1}return e?void n.call(i,t,r.resolve):r.resolve()}),i._d=o},on:function(t,e,n){return n=this,n._o.push([t,e]),n._i(t,e),n},once:function(t,e,n){return n=this,n._i(t,e),n},o:function(){return!1},e:function(e,n,i,o,r,a){t("body").append('<div class="error"><div class="_"></div><dl><dt><span class="ico ico-sad"></span></dt><dd>'+e+'</dd><dd>请<a href="#" onclick="location.reload();return 0">刷新页面</a>以尝试解决这个问题。</dd></dl></div>'),n=t(".error"),i=n.children("dl"),o=40,r=n.width(),a=Math.min(480,r-o),i.css({width:a,left:Math.floor((r-a)/2)}),i.css("top",Math.floor((n.height()-i.height()-o)/2)),n.css({top:0,left:0})},_r:function(e){e=this,t.each(e._o,function(t,n){e._i(n[0],n[1])})},r:function(e,n,i,o,r,a,s,c,d,l){t("h2").text()!=e.t&&(document.title=e.n+" "+e.t+" | CCNR v2",n=this,i="aside a:",o="href",r="title",a="click",s=n._t.find("Chapter"),c="<h2>"+e.t+"</h2>"+t.map(e.p,function(t){return"<p>"+t+"</p>"}).join(""),d=t(i+"eq(1)"),l=e["-"],d.attr(o,l),"#"==l?d.removeAttr(r).click(n.o):d.attr(r,"《"+t(s.get(l-1)).text()+"》").off(a,n.o),d=t(i+"last"),l=e["+"],d.attr(o,l),"#"==l?d.removeAttr(r).click(n.o):d.attr(r,"《"+t(s.get(l-1)).text()+"》").off(a,n.o),t("article").html(c),n.w=0,n._r())}}})(jQuery).once(function(t,e,n,i,o,r,a,s,c){n=t(document.body),i=t("aside a:first"),o="scrolled",r="disabled",a="span",s="ico-top",c="ico-notop",t(window).scroll(function(){0<window.scrollY?(n.addClass(o),i.removeClass(r).children(a).addClass(s).removeClass(c)):(n.removeClass(o),i.addClass(r).children(a).addClass(c).removeClass(s))}),e()}).once("chapter",function(t,e,n){n=this,t.get(t("article").data("toc")).done(function(i,o){n._t=o=t(i),document.title=o.find("Title").text()+" "+document.title,e()}).fail(function(){n.e("章节列表数据读取失败")})}).on("chapter",function(t,e,n,i,o,r,a,s,c,d,l){n=this,i="aside a:",o="href",a="title",r="disabled",s=location.pathname.split("/").pop()-0,c=n._t.find("Chapter"),d=t(i+"eq(1)"),1<s?d.attr(o,s-1).attr(a,"《"+t(c.get(s-2)).text()+"》").removeClass(r):d.addClass(r).click(n.o),d=t(i+"last"),d.removeClass("prefetched"),s<c.length?(d.attr(o,s+1).attr(a,"《"+t(c.get(s)).text()+"》").removeClass(r),l=d.children(".badge"),l.text(c.length-s),document.referrer||l.removeClass("hidden")):d.addClass(r).click(n.o),e()}).on(function(t,e){t("aside").removeClass("hidden"),e()}).once("chapter",function(t,e,n){n=this,t(document).keydown(function(e,i){i=t.inArray(e.which,[37,13,39]),-1!=i&&e.which!=n.w&&(n.w=e.which,t("aside a:eq("+(1+i)+")").click())}),e()}).once("chapter",function(t,e,n){return n=this,n.s?(t(window).on("popstate",function(t){history.state&&n.r(history.state)}),void t(document).ready(function(n,i,o){i="aside a:",o="href",n={t:t("h2").text(),p:[],"-":t(i+"eq(1)").attr(o),"+":t(i+"last").attr(o)},n.n=document.title.split(n.t)[0].replace(/\s*$/,""),t("p").each(function(e,i){n.p.push(t(i).text())}),history.replaceState(n,"",location.href.replace(/^.*\//,"")),e()})):e()}).on("chapter",function(t,e,n,i,o){return n=this,i=t("aside a:last"),o=i.attr("href"),n.s&&"#"!=o?(o-=0,t.get(o).done(function(e,r,a){r=t(e),a={n:history.state.n,t:r.find("Title").text(),p:[],"-":"#","+":"#"},r.find("Paragraph").each(function(e,n){a.p.push(t(n).text())}),1<o&&(a["-"]=o-1),o<n._t.find("Chapter").length&&(a["+"]=o+1),i.attr("class","prefetched"),n._f=a}),void e()):e()}).on("chapter",function(t,e,n,i){return n=t('aside a:last[href!="#"]'),i=this,i.s?(n.click(function(e){return!(e=i._f)||(history.pushState(e,"",n.attr("href")),window.scrollTo(0,0),i.r(e),delete i._f,t(".badge").addClass("hidden"),!1)}),void e()):e()});
//# sourceMappingURL=ccnr2.min.js.map