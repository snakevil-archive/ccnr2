(function(d,a){a={};d.each(d("html").attr("class").split(/\s+/),function(b,c){a.feature||(c=c.split("-"),"page"==c[0]&&c[1]&&(a.feature=c[1]))});a.counter=0;a.on=function(b,c){a.counter++;switch(typeof b){case "function":c=b;b=!0;break;case "string":b="*"==b||b==a.feature;break;case "object":b=-1!=d.inArray(a.feature,b);break;default:b=!1}b&&c(d,a.feature);return a};return a})(jQuery).on("chapter",function(d,a){a=d("footer nav a.btn:last");!document.referrer&&a.attr("href")&&d.getJSON(location.href+
"/cd",{},function(b){b.quantity&&a.children(".badge").text(b.quantity).removeClass("hidden")})}).on("chapter",function(d,a){d(document).keydown(function(b,c){c=d.inArray(b.which,[37,13,39]);-1!=c&&b.which!=a&&(a=b.which,d("footer nav a.btn:eq("+c+")")[0].click())})});
