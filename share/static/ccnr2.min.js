"use strict";(function(a,b){return{_page:function(b){return a.each(a("html").attr("class").split(/\s+/),function(a,c){b||(c=c.split("-"),"page"==c[0]&&c[1]&&(b=c[1]))}),b||"unknown"}(),_hooks:[],_invoke:function(b,c){switch(typeof b){case"function":c=b,b=!0;break;case"string":b="*"==b||b==this._page;break;case"object":b=-1!=a.inArray(this._page,b);break;default:b=!1}b&&c.call(this,a,this._page)},on:function(a,b){return this._hooks.push([a,b]),this._invoke(a,b),this},refresh:function(){a.each(this._hooks,function(a,b){this._invoke(b[0],b[1])})}}})(jQuery).on("toc",function(a,b){b=a(document.body),a(window).scroll(function(){0<window.scrollY?b.addClass("scrolled"):b.removeClass("scrolled")})}).on("chapter",function(a,b){b=a("footer nav a:last"),!document.referrer&&b.attr("href")&&a.getJSON(location.href+"/cd",{},function(a){a.quantity&&b.children(".badge").text(a.quantity).removeClass("hidden")})}).on("chapter",function(a,b){a(document).keydown(function(c,d){d=a.inArray(c.which,[37,13,39]),-1!=d&&c.which!=b&&(b=c.which,a("footer nav a:eq("+d+")")[0].click())})}).on("chapter",function(a,b){b=a("p"),a(window).scroll(function(c){c=window.scrollY,a.each(b,function(b,d,e,f,g){e=a(d),f=e.offset().top,f>c||"read"==e.attr("class")||(g=e.height(),f+g>c||e.attr("class","read"))})})}).on("chapter",function(a){a("a").click(function(b,c){return c=a(this).attr("href"),"#"!=c})});